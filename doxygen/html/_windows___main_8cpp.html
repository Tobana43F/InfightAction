<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.16.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>InfightAction: Sources/Framework/Windows/Windows_Main.cpp ファイル</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">InfightAction
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 構築: Doxygen 1.16.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','検索',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_windows___main_8cpp.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">読み取り中…</div>
<div class="SRStatus" id="Searching">検索中…</div>
<div class="SRStatus" id="NoMatches">一致する文字列を見つけられません</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Windows_Main.cpp ファイル</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;io.h&gt;</code><br />
<code>#include &lt;Fcntl.h&gt;</code><br />
<code>#include &quot;<a class="el" href="_windows___include_8h_source.html">Windows_Include.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_system___def_8h_source.html">System/System_Def.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_game___main_8h_source.html">Game/Game_Main.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-namespaces" class="groupheader"><a id="namespaces" name="namespaces"></a>
名前空間</h2></td></tr>
<tr class="memitem:NWindows" id="r_NWindows"><td class="memItemLeft">namespace &#160;</td><td class="memItemRight"><a class="el" href="namespace_n_windows.html">NWindows</a></td></tr>
<tr class="memdesc:namespace_n_windows"><td class="mdescLeft">&#160;</td><td class="mdescRight">ウィンドウズの変数で共通に使いものを定義 <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
マクロ定義</h2></td></tr>
<tr class="memitem:a48a1ab88886d004022e4540b5e4da7bc" id="r_a48a1ab88886d004022e4540b5e4da7bc"><td class="memItemLeft">#define&#160;</td><td class="memItemRight"><a class="el" href="#a48a1ab88886d004022e4540b5e4da7bc">WINDOW_STYLE</a>&#160;&#160;&#160;WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
関数</h2></td></tr>
<tr class="memitem:ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e" id="r_ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e"><td class="memItemLeft">ATOM&#160;</td><td class="memItemRight"><a class="el" href="#ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e">MyRegisterClass</a> (HINSTANCE _hInstance)</td></tr>
<tr class="memdesc:ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ウィンドウクラスを登録  <br /></td></tr>
<tr class="memitem:aa578b330c27389b8e7236da5e66297b7" id="r_aa578b330c27389b8e7236da5e66297b7"><td class="memItemLeft">BOOL&#160;</td><td class="memItemRight"><a class="el" href="#aa578b330c27389b8e7236da5e66297b7">InitInstance</a> (HINSTANCE _hInstance, int _nCmdShow)</td></tr>
<tr class="memdesc:aa578b330c27389b8e7236da5e66297b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">ウィンドウの作成、初期化  <br /></td></tr>
<tr class="memitem:af9c7f09fe75c935935232b23cb5c77ca" id="r_af9c7f09fe75c935935232b23cb5c77ca"><td class="memItemLeft">LRESULT CALLBACK&#160;</td><td class="memItemRight"><a class="el" href="#af9c7f09fe75c935935232b23cb5c77ca">WndProc</a> (HWND _hWnd, UINT _message, WPARAM _wParam, LPARAM _lParam)</td></tr>
<tr class="memdesc:af9c7f09fe75c935935232b23cb5c77ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">ウィンドウプロシージャ  <br /></td></tr>
<tr class="memitem:a50274bd95aac30af292342cdb73435fa" id="r_a50274bd95aac30af292342cdb73435fa"><td class="memItemLeft">int APIENTRY&#160;</td><td class="memItemRight"><a class="el" href="#a50274bd95aac30af292342cdb73435fa">wWinMain</a> (HINSTANCE _hInstance, HINSTANCE _hPrevInstance, LPWSTR _lpCmdLine, int _nCmdShow)</td></tr>
<tr class="memdesc:a50274bd95aac30af292342cdb73435fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">エントリポイント  <br /></td></tr>
</table>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">マクロ定義詳解</h2>
<a id="a48a1ab88886d004022e4540b5e4da7bc" name="a48a1ab88886d004022e4540b5e4da7bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48a1ab88886d004022e4540b5e4da7bc">&#9670;&#160;</a></span>WINDOW_STYLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WINDOW_STYLE&#160;&#160;&#160;WS_OVERLAPPED | WS_CAPTION | WS_SYSMENU</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">関数詳解</h2>
<a id="aa578b330c27389b8e7236da5e66297b7" name="aa578b330c27389b8e7236da5e66297b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa578b330c27389b8e7236da5e66297b7">&#9670;&#160;</a></span>InitInstance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BOOL InitInstance </td>
          <td>(</td>
          <td class="paramtype">HINSTANCE</td>          <td class="paramname"><span class="paramname"><em>_hInstance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>_nCmdShow</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ウィンドウの作成、初期化 </p>
<div class="fragment"><div class="line"><span class="lineno">  111</span>{</div>
<div class="line"><span class="lineno">  112</span>    <span class="keyword">using namespace </span><a class="code hl_namespace" href="namespace_n_system.html">NSystem</a>;</div>
<div class="line"><span class="lineno">  113</span> </div>
<div class="line"><span class="lineno">  114</span>    <a class="code hl_variable" href="namespace_n_windows.html#a96f210f622c2f0f9715131222831811d">gHInst</a> = _hInstance; <span class="comment">// グローバル変数にインスタンス処理を格納します。</span></div>
<div class="line"><span class="lineno">  115</span> </div>
<div class="line"><span class="lineno">  116</span>    <span class="comment">// ウィンドウの作成</span></div>
<div class="line"><span class="lineno">  117</span>    HWND hWnd = CreateWindow(</div>
<div class="line"><span class="lineno">  118</span>        NSystem::WINDOW_CLASS_NAME,</div>
<div class="line"><span class="lineno">  119</span>        NSystem::WINDOW_TITLE,</div>
<div class="line"><span class="lineno">  120</span>        <a class="code hl_define" href="#a48a1ab88886d004022e4540b5e4da7bc">WINDOW_STYLE</a>,</div>
<div class="line"><span class="lineno">  121</span>        0, 0,                                                       <span class="comment">// 座標</span></div>
<div class="line"><span class="lineno">  122</span>        (<span class="keywordtype">int</span>)WINDOW_WIDTH, (<span class="keywordtype">int</span>)WINDOW_HEIGHT,  <span class="comment">// サイズ</span></div>
<div class="line"><span class="lineno">  123</span>        HWND_DESKTOP,</div>
<div class="line"><span class="lineno">  124</span>        <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno">  125</span>        _hInstance,</div>
<div class="line"><span class="lineno">  126</span>        <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>    <span class="keywordflow">if</span> (!hWnd) {</div>
<div class="line"><span class="lineno">  129</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">  130</span>    }</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    <a class="code hl_variable" href="namespace_n_windows.html#a81c09ee7132d914265a3818f9edc5f42">gHWnd</a> = hWnd;       <span class="comment">// グローバルに格納</span></div>
<div class="line"><span class="lineno">  133</span> </div>
<div class="line"><span class="lineno">  134</span>    <span class="comment">// ウィンドウ位置を再設定</span></div>
<div class="line"><span class="lineno">  135</span>    RECT    window;</div>
<div class="line"><span class="lineno">  136</span>    RECT    client;</div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>    GetWindowRect(hWnd, &amp;window);</div>
<div class="line"><span class="lineno">  139</span>    GetClientRect(hWnd, &amp;client);</div>
<div class="line"><span class="lineno">  140</span> </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordtype">float</span> width = (window.right - window.left) - (client.right - client.left) + WINDOW_WIDTH;</div>
<div class="line"><span class="lineno">  142</span>    <span class="keywordtype">float</span> height = (window.bottom - window.top) - (client.bottom - client.top) + WINDOW_HEIGHT;</div>
<div class="line"><span class="lineno">  143</span>    SetWindowPos(</div>
<div class="line"><span class="lineno">  144</span>        hWnd,</div>
<div class="line"><span class="lineno">  145</span>        <span class="keyword">nullptr</span>,</div>
<div class="line"><span class="lineno">  146</span>        (<span class="keywordtype">int</span>)(GetSystemMetrics(SM_CXSCREEN) * 0.5f - width * 0.5f),</div>
<div class="line"><span class="lineno">  147</span>        (<span class="keywordtype">int</span>)(GetSystemMetrics(SM_CYSCREEN) * 0.5f - height * 0.5f),</div>
<div class="line"><span class="lineno">  148</span>        (<span class="keywordtype">int</span>)width - 1,</div>
<div class="line"><span class="lineno">  149</span>        (<span class="keywordtype">int</span>)height - 1,</div>
<div class="line"><span class="lineno">  150</span>        SWP_NOZORDER);</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>    <span class="comment">// ウィンドウの表示</span></div>
<div class="line"><span class="lineno">  153</span>    ShowWindow(hWnd, _nCmdShow);</div>
<div class="line"><span class="lineno">  154</span>    UpdateWindow(hWnd);</div>
<div class="line"><span class="lineno">  155</span> </div>
<div class="line"><span class="lineno">  156</span>    <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><span class="lineno">  157</span>}</div>
<div class="ttc" id="a_windows___main_8cpp_html_a48a1ab88886d004022e4540b5e4da7bc"><div class="ttname"><a href="#a48a1ab88886d004022e4540b5e4da7bc">WINDOW_STYLE</a></div><div class="ttdeci">#define WINDOW_STYLE</div><div class="ttdef"><b>Definition</b> Windows_Main.cpp:7</div></div>
<div class="ttc" id="anamespace_n_system_html"><div class="ttname"><a href="namespace_n_system.html">NSystem</a></div><div class="ttdoc">システム上で必要な処理を行う関数群</div><div class="ttdef"><b>Definition</b> System_Common.cpp:8</div></div>
<div class="ttc" id="anamespace_n_windows_html_a81c09ee7132d914265a3818f9edc5f42"><div class="ttname"><a href="namespace_n_windows.html#a81c09ee7132d914265a3818f9edc5f42">NWindows::gHWnd</a></div><div class="ttdeci">HWND gHWnd</div><div class="ttdef"><b>Definition</b> Windows_Main.cpp:11</div></div>
<div class="ttc" id="anamespace_n_windows_html_a96f210f622c2f0f9715131222831811d"><div class="ttname"><a href="namespace_n_windows.html#a96f210f622c2f0f9715131222831811d">NWindows::gHInst</a></div><div class="ttdeci">HINSTANCE gHInst</div><div class="ttdef"><b>Definition</b> Windows_Main.cpp:12</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e" name="ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e">&#9670;&#160;</a></span>MyRegisterClass()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ATOM MyRegisterClass </td>
          <td>(</td>
          <td class="paramtype">HINSTANCE</td>          <td class="paramname"><span class="paramname"><em>_hInstance</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ウィンドウクラスを登録 </p>
<div class="fragment"><div class="line"><span class="lineno">   89</span>{</div>
<div class="line"><span class="lineno">   90</span>    WNDCLASSEX wcex;</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>    wcex.cbSize = <span class="keyword">sizeof</span>(WNDCLASSEX);</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>    wcex.style = 0;</div>
<div class="line"><span class="lineno">   95</span>    wcex.lpfnWndProc = <a class="code hl_function" href="#af9c7f09fe75c935935232b23cb5c77ca">WndProc</a>;</div>
<div class="line"><span class="lineno">   96</span>    wcex.cbClsExtra = 0;</div>
<div class="line"><span class="lineno">   97</span>    wcex.cbWndExtra = 0;</div>
<div class="line"><span class="lineno">   98</span>    wcex.hInstance = _hInstance;</div>
<div class="line"><span class="lineno">   99</span>    wcex.hIcon = LoadIcon(_hInstance, IDI_APPLICATION);</div>
<div class="line"><span class="lineno">  100</span>    wcex.hCursor = LoadCursor(<span class="keyword">nullptr</span>, IDC_ARROW);</div>
<div class="line"><span class="lineno">  101</span>    wcex.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);</div>
<div class="line"><span class="lineno">  102</span>    wcex.lpszMenuName = 0;</div>
<div class="line"><span class="lineno">  103</span>    wcex.lpszClassName = NSystem::WINDOW_CLASS_NAME;</div>
<div class="line"><span class="lineno">  104</span>    wcex.hIconSm = LoadIcon(wcex.hInstance, IDI_WINLOGO);</div>
<div class="line"><span class="lineno">  105</span> </div>
<div class="line"><span class="lineno">  106</span>    <span class="keywordflow">return</span> RegisterClassEx(&amp;wcex);</div>
<div class="line"><span class="lineno">  107</span>}</div>
<div class="ttc" id="a_windows___main_8cpp_html_af9c7f09fe75c935935232b23cb5c77ca"><div class="ttname"><a href="#af9c7f09fe75c935935232b23cb5c77ca">WndProc</a></div><div class="ttdeci">LRESULT CALLBACK WndProc(HWND, UINT, WPARAM, LPARAM)</div><div class="ttdoc">ウィンドウプロシージャ</div><div class="ttdef"><b>Definition</b> Windows_Main.cpp:160</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9c7f09fe75c935935232b23cb5c77ca" name="af9c7f09fe75c935935232b23cb5c77ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c7f09fe75c935935232b23cb5c77ca">&#9670;&#160;</a></span>WndProc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LRESULT CALLBACK WndProc </td>
          <td>(</td>
          <td class="paramtype">HWND</td>          <td class="paramname"><span class="paramname"><em>_hWnd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UINT</td>          <td class="paramname"><span class="paramname"><em>_message</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">WPARAM</td>          <td class="paramname"><span class="paramname"><em>_wParam</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LPARAM</td>          <td class="paramname"><span class="paramname"><em>_lParam</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ウィンドウプロシージャ </p>
<div class="fragment"><div class="line"><span class="lineno">  161</span>{</div>
<div class="line"><span class="lineno">  162</span>    <span class="keywordflow">switch</span> (_message) {</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">case</span> WM_KEYDOWN:</div>
<div class="line"><span class="lineno">  164</span>            <span class="keywordflow">switch</span> (_wParam) {</div>
<div class="line"><span class="lineno">  165</span>                <span class="keywordflow">case</span> VK_ESCAPE:</div>
<div class="line"><span class="lineno">  166</span>                    DestroyWindow(_hWnd);</div>
<div class="line"><span class="lineno">  167</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  168</span>            }</div>
<div class="line"><span class="lineno">  169</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  170</span> </div>
<div class="line"><span class="lineno">  171</span>        <span class="keywordflow">case</span> WM_DESTROY:</div>
<div class="line"><span class="lineno">  172</span>            PostQuitMessage(0);</div>
<div class="line"><span class="lineno">  173</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  174</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  175</span>            <span class="keywordflow">return</span> DefWindowProc(_hWnd, _message, _wParam, _lParam);</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="line"><span class="lineno">  177</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  178</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a50274bd95aac30af292342cdb73435fa" name="a50274bd95aac30af292342cdb73435fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50274bd95aac30af292342cdb73435fa">&#9670;&#160;</a></span>wWinMain()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int APIENTRY wWinMain </td>
          <td>(</td>
          <td class="paramtype">HINSTANCE</td>          <td class="paramname"><span class="paramname"><em>_hInstance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">HINSTANCE</td>          <td class="paramname"><span class="paramname"><em>_hPrevInstance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">LPWSTR</td>          <td class="paramname"><span class="paramname"><em>_lpCmdLine</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>_nCmdShow</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>エントリポイント </p>
<div class="fragment"><div class="line"><span class="lineno">   28</span>{</div>
<div class="line"><span class="lineno">   29</span>    UNREFERENCED_PARAMETER(_hPrevInstance);</div>
<div class="line"><span class="lineno">   30</span>    UNREFERENCED_PARAMETER(_lpCmdLine);</div>
<div class="line"><span class="lineno">   31</span> </div>
<div class="line"><span class="lineno">   32</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno">   33</span>    ::_CrtSetDbgFlag(_CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF); <span class="comment">// メモリリーク検出用</span></div>
<div class="line"><span class="lineno">   34</span>    <span class="comment">//::_CrtSetBreakAlloc(149); // 検出したメモリリークの場所を検知したいときに使う。(出力ウィンドウの[]中の数字がそれ)</span></div>
<div class="line"><span class="lineno">   35</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">   36</span> </div>
<div class="line"><span class="lineno">   37</span>    <span class="comment">// デバッグ用コンソール画面の初期化</span></div>
<div class="line"><span class="lineno">   38</span>    <span class="keywordflow">if</span> (AllocConsole()) {</div>
<div class="line"><span class="lineno">   39</span>        FILE *fp;</div>
<div class="line"><span class="lineno">   40</span>        freopen_s(&amp;fp, <span class="stringliteral">&quot;CON&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>, stdout);    <span class="comment">// 標準出力の割り当て</span></div>
<div class="line"><span class="lineno">   41</span>    }</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    <span class="comment">// 登録</span></div>
<div class="line"><span class="lineno">   45</span>    <a class="code hl_function" href="#ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e">MyRegisterClass</a>(_hInstance);</div>
<div class="line"><span class="lineno">   46</span> </div>
<div class="line"><span class="lineno">   47</span>    <span class="comment">// アプリケーションの初期化を実行します:</span></div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#aa578b330c27389b8e7236da5e66297b7">InitInstance</a>(_hInstance, _nCmdShow)) {</div>
<div class="line"><span class="lineno">   49</span>        MessageBox(0, <span class="stringliteral">&quot;Error&quot;</span>, <span class="stringliteral">&quot;初期化失敗&quot;</span>, MB_OK);</div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">   51</span>    }</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="comment">// ゲームの処理</span></div>
<div class="line"><span class="lineno">   54</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_n_util_1_1_c_singleton.html#a08cc988d79fa3297df6ede328e44a770">NGame::CMain::GetInst</a>().<a class="code hl_function" href="namespace_n_direct_x.html#adf1bd9acd955d3f50b0941cc5d399b29">Setup</a>(<a class="code hl_variable" href="namespace_n_windows.html#a96f210f622c2f0f9715131222831811d">NWindows::gHInst</a>, <a class="code hl_variable" href="namespace_n_windows.html#a81c09ee7132d914265a3818f9edc5f42">NWindows::gHWnd</a>)) {</div>
<div class="line"><span class="lineno">   55</span>        MessageBox(0, <span class="stringliteral">&quot;Error&quot;</span>, <span class="stringliteral">&quot;初期化失敗&quot;</span>, MB_OK);</div>
<div class="line"><span class="lineno">   56</span>        <span class="keywordflow">return</span> FALSE;</div>
<div class="line"><span class="lineno">   57</span>    }</div>
<div class="line"><span class="lineno">   58</span> </div>
<div class="line"><span class="lineno">   59</span>    <span class="comment">// メイン メッセージ ループ:</span></div>
<div class="line"><span class="lineno">   60</span>    MSG msg;</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><span class="lineno">   62</span>        BOOL ret = GetMessage(&amp;msg, <span class="keyword">nullptr</span>, 0, 0);</div>
<div class="line"><span class="lineno">   63</span>        <span class="comment">// メッセージを処理</span></div>
<div class="line"><span class="lineno">   64</span>        <span class="keywordflow">if</span> (ret &gt; 0) {</div>
<div class="line"><span class="lineno">   65</span>            TranslateMessage(&amp;msg);</div>
<div class="line"><span class="lineno">   66</span>            DispatchMessage(&amp;msg);</div>
<div class="line"><span class="lineno">   67</span>        }</div>
<div class="line"><span class="lineno">   68</span>        <span class="comment">// 終了判断</span></div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ret == 0) {</div>
<div class="line"><span class="lineno">   70</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   71</span>        }</div>
<div class="line"><span class="lineno">   72</span>        <span class="comment">// エラー処理</span></div>
<div class="line"><span class="lineno">   73</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   74</span>            MessageBox(<a class="code hl_variable" href="namespace_n_windows.html#a81c09ee7132d914265a3818f9edc5f42">gHWnd</a>, <span class="stringliteral">&quot;メッセージの取得に失敗しました。&quot;</span>, <span class="stringliteral">&quot;Fatal Error&quot;</span>, MB_OK | MB_ICONSTOP);</div>
<div class="line"><span class="lineno">   75</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   76</span>        }</div>
<div class="line"><span class="lineno">   77</span>    }</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    <span class="comment">// 終了処理</span></div>
<div class="line"><span class="lineno">   80</span>    <a class="code hl_function" href="class_n_util_1_1_c_singleton.html#a08cc988d79fa3297df6ede328e44a770">NGame::CMain::GetInst</a>().TearDown();</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    FreeConsole();              <span class="comment">// コンソールを開放</span></div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)msg.wParam;</div>
<div class="line"><span class="lineno">   85</span>}</div>
<div class="ttc" id="a_windows___main_8cpp_html_aa578b330c27389b8e7236da5e66297b7"><div class="ttname"><a href="#aa578b330c27389b8e7236da5e66297b7">InitInstance</a></div><div class="ttdeci">BOOL InitInstance(HINSTANCE, int)</div><div class="ttdoc">ウィンドウの作成、初期化</div><div class="ttdef"><b>Definition</b> Windows_Main.cpp:110</div></div>
<div class="ttc" id="a_windows___main_8cpp_html_ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e"><div class="ttname"><a href="#ad33d3fcbb2b41ff5a7c5fb9ae2d2db3e">MyRegisterClass</a></div><div class="ttdeci">ATOM MyRegisterClass(HINSTANCE _hInstance)</div><div class="ttdoc">ウィンドウクラスを登録</div><div class="ttdef"><b>Definition</b> Windows_Main.cpp:88</div></div>
<div class="ttc" id="aclass_n_util_1_1_c_singleton_html_a08cc988d79fa3297df6ede328e44a770"><div class="ttname"><a href="class_n_util_1_1_c_singleton.html#a08cc988d79fa3297df6ede328e44a770">NUtil::CSingleton&lt; CMain &gt;::GetInst</a></div><div class="ttdeci">static CMain &amp; GetInst()</div><div class="ttdef"><b>Definition</b> Util_SingletonTemplate.h:10</div></div>
<div class="ttc" id="anamespace_n_direct_x_html_adf1bd9acd955d3f50b0941cc5d399b29"><div class="ttname"><a href="namespace_n_direct_x.html#adf1bd9acd955d3f50b0941cc5d399b29">NDirectX::Setup</a></div><div class="ttdeci">void Setup(HINSTANCE _hInstance, HWND _hWnd, UINT _width, UINT _height)</div><div class="ttdef"><b>Definition</b> DirectX_Manager.cpp:21</div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_937900b87e0c7a5fa01190c395fb83f7.html">Sources</a></li><li class="navelem"><a href="dir_b559203939f0f8db84450e626440a3c1.html">Framework</a></li><li class="navelem"><a href="dir_5436dd54a3602ad41965824d63e86ee4.html">Windows</a></li><li class="navelem"><a href="_windows___main_8cpp.html">Windows_Main.cpp</a></li>
    <li class="footer">構築: <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.16.1 </li>
  </ul>
</div>
</body>
</html>
